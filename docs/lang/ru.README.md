# Шаблоны проектирования

## Содержание

- **Пораждающие**  
  Обеспечивают изоляцию клиента от создания объектов
  - [Фабричный метод](#фабричный-метод)
  - [Абстрактная фабрика](#абстрактная-фабрика)
  - [Строитель](#строитель)
  - [Одиночка](#одиночка)

- **Структурные**  
  Расширяют возможности системы не нарушая структуру
  - [Декоратор](#декоратор)
  - [Фасад](#фасад)
  - [Адаптер](#адаптер)
  - [Компоновщик](#компоновщик)

- **Поведенческие**  
  Регулируют обязанности и отношения между объектами
  - [Стратегия](#стратегия)
  - [Состояние](#состояние)
  - [Итератор](#итератор)
  - [Наблюдатель](#наблюдатель)
  - [Цепочка обязанностей](#цепочка-обязанностей)
  - [Шаблонный метод](#шаблонный-метод)
  - [Команда](#команда)
  - [Заместитель](#заместитель)
  - [Посредник](#посредник)
  - [Несуществующий объект](#несуществующий-объект)

## Как читать UML

Сущность                                        | Описание
:---------------------------------------------: | :------------------------------------------------------------------------
![class](/docs/img/class.png)                   | Класс (сверху вниз: название, данные, методы)
\-                                              | private
\+                                              | public
\#                                              | protected
![interface](/docs/img/interface.png)           | Интерфейс или абстрактный класс
![context](/docs/img/context.png)               | Пример взаимодействия с паттерном
![context-arrow](/docs/img/context-arrow.png)   | Указание, как идет взаимодействие с паттерном
![pattern](/docs/img/pattern.png)               | Паттерн или концептуальная часть паттерна
![implementation](/docs/img/implementation.png) | Реализация интерфейса или наследование
![aggregation](/docs/img/aggregation.png)       | Объект справа содержит объект слева посредством аггрегации или композиции
![composition](/docs/img/composition.png)       | Объект справа содержит объект слева посредством композиции

## Пораждающие

### Фабричный метод

![Factory-Method](/docs/img/patterns/Factory%20Method.png)

**Назначение**  
Предоставляет интерфейс создания объекта без привязки к классу создаваемого объекта

| Примеры
| -
| TODO

**Особенности**:

- Интерфейс паттерна обязует использовать функцию, которая возвращает объект
- Ответственность за создание объекта полностью лежит на том объекте, который реализует интерфейс с фабричным методом
- Паттерн предоставляет возможность проведения операций перед возвращением объекта
- Можно использовать паттерн [Стратегия](#стратегия), где изменением стратегии является изменение фабрики

**[Содержание ↑](#содержание)**

### Абстрактная фабрика

![Abstract-Factory](/docs/img/patterns/Abstract%20Factory.png)

**Назначение**  
Предоставляет интерфейс создания семейства объектов без указания конкретных классов этих семейств

| Примеры
| -
| TODO

**Особенности**:

- Абстрактная фабрика включается в себя [фабричные методы](#фабричный-метод)
- Для соблюдения принципов проектирования, объекты, создаваемые фабрикой, должны обладать сильной связностью (**не связанностью**)
- Можно создать [Стратегию](#стратегия) изменения фабрики семейства объектов

**[Содержание ↑](#содержание)**

### Строитель

![Builder](/docs/img/patterns/Builder.png)

**Назначение**  
Разбивает конструирование объектов на этапы и предоставляет интерфейс управления этими этапами

| Примеры
| -
| TODO

**Особенности**:

- Клиент не взаимодействует с этапами напрямую
- Этап не обязан возвращать объект
- Директор обязан предоставить метод, управляющий этапами и возвращающий объект
- Директор может иметь несколько методов, управляющих этапами
- Можно использовать паттерн [Стратегия](#стратегия), где изменением стратегии будет изменение стратегии построения объекта

**[Содержание ↑](#содержание)**

### Одиночка

![Singleton](/docs/img/patterns/Singleton.png)

**Назначение**  
Гарантирует, что создаваемый объект будет единственным в своем роде

| Примеры
| -
| TODO

**Особенности**:

- Паттерн подразумевает статический метод, который возвращает объект, вместо инициализации объекта. Я не нахожу это антипаттерном.
- Для соблюдения принципов проектирования не нагружайте объект дополнительной логикой, объект должен только предоставлять себя со своим состоянием
- Используйте [Декоратор](#декоратор) для наделения объекта логикой
- Паттерн не справяется с одновременным асинхронным доступом, реккомендуется создавать Singleton объекты на этапе инициализации проекта

**[Содержание ↑](#содержание)**

## Структурные

### Декоратор

![Decorator](/docs/img/patterns/Decorator.png)

**Назначение**  
Наделяет интерфейс объекта новым функционалом, не изменяя его

| Примеры
| -
| TODO

**Особенности**:

- Клиент взаимодействует с объектом-целью и объектом-декоратором, используя единый метод их интерфейса
- Объект-декоратор содержит объект-цель и реализует его интерфейс опираясь на его свойства.
- Инициализация одного объекта внутри другого объекта не является Декоратором, а является Dependency Injection (внедрение зависимости).
- Если нужно самостоятельный объект одного интерфейса использовать под другим интерфейсом, используйте [Адаптер](#адаптер)

**[Содержание ↑](#содержание)**

### Фасад

![Facade](/docs/img/patterns/Facade.png)

**Назначение**  
Предоставляет упрощенный интерфейс сложной системы

| Примеры
| -
| TODO

**Особенности**:

- Фасад может содержать несколько методов с одними и теми же объектами
- Объекты, на свойства которых полагается объект-фасад, должны обладать логической связностью и принадлежать одной системе
- Имена методов Фасада не должны совпадать с именами методов используемых объектов, скрывая связность с другими объектами

**[Содержание ↑](#содержание)**

### Адаптер

![Adapter](/docs/img/patterns/Adapter.png)

**Назначение**  
Предоставляет возможность объектам с разными интерфейсами работать под одним интерфейсом

| Примеры
| -
| TODO

**Особенности**:

- Объект-адаптер обязан реализовывать интерфейс объекта, под который нужно адаптироваться
- Клиент взаимодействует с объектом-целью и объектом-адаптером, используя единый метод их интерфейса
- Объект-адаптер является самостоятельным объектом и может использоваться в системе под своим интерфейсом
- Если нужно изменить поведение метода объекта-цели, используйте паттерн [Декоратор](#декоратор)

**[Содержание ↑](#содержание)**

### Компоновщик

![Composite](/docs/img/patterns/Composite.png)

**Назначение**  
Позволяет работать с деревом объектов одного интерфейса как с одним объектом

| Примеры
| -
| TODO

**Особенности**:

- Компоновщик похож на паттерн [Фасад](#фасад) тем, что его метод инкапсулирует работу методов связных объектов
- Компоновщик может содержать компоненты и другие компоновщики, если они реализуют интерфейс компонентов, образуя дерево объектов
- Метод, обрабатывающий дерево объектов реализуется при помощи паттерна [Итератор](#итератор)

**[Содержание ↑](#содержание)**

## Поведенческие

### Стратегия

![Strategy](/docs/img/patterns/Strategy.png)

**Назначение**  
Инкапсулирует изменение поведения одних и тех же методов объекта в зависимости от выбранной стратегии

| Примеры
| -
| TODO

**Особенности**:

- Стратегия предоставляет один из вариантов реализации полиморфизма подтипов
- Согласно объектно-ориентированному мышлению, объект должен самостоятельно принимать решения, по-этому смена стратегии должна быть просьбой, а не приказом
- Если нужно хранить стратегии, используйте паттерн [Состояние](#состояние)

**[Содержание ↑](#содержание)**

### Состояние

![State](/docs/img/patterns/State.png)

**Назначение**  
Инкапсулирует изменение поведения одних и тех же методов объекта в зависимости от его состояния

| Примеры
| -
| TODO

**Особенности**:

- При создания объекта с сотояниями, необходимо инициализировать первоначальное состояние
- Состояния являются объектами одного интерфейса
- При помощи композиции можно проинициализировать все состояния объекта при его создании, но можно передать их позже при помощи агрегации
- Паттерн содержит [Стратегию](#стратегия) для установки состояния

**[Содержание ↑](#содержание)**

### Итератор

![Iterator](/docs/img/patterns/Iterator.png)

**Назначение**  
Предоставляет интерфейс перебора данных различных типов

| Примеры
| -
| TODO

**Особенности**:

- Объект с коллекцией, которую необходимо итерировать, должен реализовать интерфейс создания объекта-итератора
- Паттерн содержит [Фабричный метод](#фабричный-метод) для создания объекта-итератора
- Клиент не взаимодействует с объектами-итераторами

**[Содержание ↑](#содержание)**

### Наблюдатель

![Observer](/docs/img/patterns/Observer.png)

**Назначение**  
Предоставляет механизм слежки за состоянием объектов

| Примеры
| -
| TODO

**Особенности**:

- Объекты-подписчики должны быть готовы получить информацию от объекта, на которого их подписали, не зная его
- Объект, хранящий подписчиков, сам решает когда их уведомлять
- Объекты-подписчики могут получать информацию от разных объектов одного интерфейса одним и тем же способом, реализуя параметрический полиморфизм

**[Содержание ↑](#содержание)**

### Цепочка обязанностей

![Chain of Responsibility](/docs/img/patterns/Chain%20of%20Responsibility.png)

**Назначение**  
Инкапсулирует работу системы, основанной на последовательных вызовых объектов одного интерфейса, в вызове одного объекта

| Примеры
| -
| TODO

**Особенности**:

- Паттерн "Цепочка обязанностей" похож на паттерн [Фасад](#фасад) тем, что его метод инкапсулирует работу методов связных объектов
- В отличае от паттерна [Фасад](#фасад), объект, к которому обращается клиент, реализует единый интерфейс со всеми участниками
- В отличае от паттерна [Фасад](#фасад), объект, к которому обращается клиент, не взаимодействует со всеми участниками, а передает управление
- Паттерн предоставляет возможность выбирать начало цепочки, но если цепочка представляет собой сложную структуру, реализуйте ее через [Посредника](#посредник)

**[Содержание ↑](#содержание)**

### Шаблонный метод

![Template Method](/docs/img/patterns/Template%20Method.png)

**Назначение**  
Предоставляет единый интерфейс использования алгоритма с возможностью разной реализации шагов

| Примеры
| -
| TODO

**Особенности**:

- Паттерн реализует принцип инкапсуляции изменений, отделяя их от постоянного
- Шаблонный метод похож на паттерн [Фасад](#фасад) тем, что его метод инкапсулирует работу методов связных объектов
- Шаблонный метод отличается от паттерна [Фасад](#фасад) тем, что может заменять поведение объектов стандартным поведением

**[Содержание ↑](#содержание)**

### Команда

![Command](/docs/img/patterns/Command.png)

**Назначение**  
Предоставляет единый интерфейс выполнения команд с возможностью выполнения дополнительных операций над ними

| Примеры
| -
| TODO

**Особенности**:

- Команды являются объектами одного интерфейса
- Можно использовать [Стратегию](#стратегия) для изменения команды
- Клиент работает с объектом, в котором инициализируется и управляется команда

**[Содержание ↑](#содержание)**

### Заместитель

![Proxy](/docs/img/patterns/Proxy.png)

**Назначение**  
Контролирует доступ к объекту за счет объекта-заместителя

| Примеры
| -
| TODO

**Особенности**:

- Паттерн Заместитель очень схож с паттерном [Декоратор](#декоратор)
- В отличие от паттерна [Декоратор](#декоратор), объект-заместитель может существовать без объекта-цели, замещая его в его отсутствие
- В отличие от паттерна [Декоратор](#декоратор), объект-заместитель не обязан расширять функциональность объекта-цели и может перенаправить ему управление

**[Содержание ↑](#содержание)**

### Посредник

![Mediator](/docs/img/patterns/Mediator.png)

**Назначение**  
Забирает на себя ответственность за связь между компонентами

| Примеры
| -
| TODO

**Особенности**:

- Клиент не взаимодействует с объектами-посредниками
- Компоненты не взаимодействуют между собой
- Паттерн предоставляет возможность компонентам менять посредника
- Посредник похож на ["Цепочку обязанностей"](#цепочка-обязанностей) тем, что после обращения клиента происходит череда событий, в которых могут принимать участие несколько объектов

**[Содержание ↑](#содержание)**

### Несуществующий объект

![Null Object](/docs/img/patterns/Null%20Object.png)

**Назначение**  
Предоставляет объект с нейтральным поведением методов интерфейса

| Примеры
| -
| TODO

**Особенности**:

- Объект с нейтральным состоянием предоставляет один из вариантов обработки исключений
- "Несуществующий объект" обязан реализовать интерфейс системы, которой необходимы нейтральные состояния

**[Содержание ↑](#содержание)**
